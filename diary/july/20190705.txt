개발 31일차
아침에 출근하고 나서 과장님(김과장님)이랑 이것 저것 대화 좀 나누다가 자격증과 회사 관련 얘기좀 하다 보니
내 미래계획를 좀 생각하게 되었다. okky의 누군가는 이렇게 말한다. 개발자는 연봉 상승률이 좋지 않기 때문에 대부분 이직을 한다.
첫 연봉을 높게 잡아야 연봉 상승률이 좋지 않은 점이 상쇄가 된다고. 그렇다면 내가 이직 시 연봉을 높게 받을 수 있는 방법에
대해서 고민을 해볼 필요가 있다. 다른 연봉 상승률이 좋은 직업은 계단을 밟아 가는 것 처럼 차례차례 한발씩 걸으면 되지만
개발자는 계단이 아니라 슈퍼 마리오 점프대이다. 준비 없이 뛰어 들었다간 미끌어져 저 화면 밑으로 떨어져 Game Over인셈이다.
그만큼 리스크가 있다는 점을 말하고 싶다. 그럼 내가 연봉을 높게 받을 수 있는 방법은 뭘까? 일단 가장 인기있는 개발 언어를
찾아보았다. 1위 자바스크립트, 2위 자바, 3위 파이썬, 4위 php, 5위 C#이다. 기초적으로 이 5개의 언어는 내가 알고 있어야
이직시 선택의 폭이 넓어 질 수 있다. 선택의 폭이 넓어 진다는 것은 내가 불리할 때 그나마 유리한 선택지를 고를 수 있는 확률이
올라간다는 것이다. 패에 불리한 카드만 있어도 한장 더 뽑아서 유리한 카드를 내 손에 가져 올 수 있다면 좋지 않은가. 그다음
로켓펀치라는 구직사이트를 보면서 채용동향을 살펴보았다. 구체적으로 어떤 언어들을 선호하는지 알 수 있다. frontend쪽은
React, Vue, Angular를 backend서버는 Django(Phython), Nodejs, AWS 의외로 백엔드로 Java Spring을 적는 경우가 없다.
기본적으로 해야한다고 생각하는 걸까? AWS만 적고 넘기는 경우도 허다하다. 이런 것들을 다룰려면 Spring이 필요할 텐데.
그리고 모바일 개발로 몇건 android,ios이 있다. 그러면 내가 해야할 일들이 보인다. frontend쪽은 React, Angular를 더 공부해야하고
backend는 Django, Nodejs, AWS를 알아볼 필요가 있는 것이다. 만약 면접을 본다면 내가 어떤 언어나 도구를 쓰는 프로젝트에
임했고 어느정도 기간을 참여했는지 물어봐서 자신의 회사에 적합한 인재인지 물어볼 것인데, 적합한 답변을 할 수 있도록 
내가 위 언어도구들을 사용하는 프로젝트에 참여했으면 좋겠다. 그게 되지 않는다면 내 나름대로 이것에 대한 토이 프로젝트를 
만들어서 프로파일 및 포트폴리오를 작성해야 할 것이다.
ssl강의를 듣고 있다. 현재 내가 알게 된 것을 정리하자면 서버->클라이언트시 랜덤값, 암호화방식, 인증서 그리고 클라이언트->서버시
랜덤값, 암호화방식, 세션아이디이다. 암호화방식을 주고 받으면서 서로 어떤 방식을 쓸지 정하고, 서버가 클라이언트에게 암호화된 인증서를 전송한다.
서로 암호화방식을 공유 했으니 그 인증서를 복호화 하고 인증기관에서 받은 개인키로 제대로된 인증서인지 확인한다. 
아까 받은 랜덤값으로 pre master secret(이하 PMS)이라는 키를 생성할 것인데 이 PMS를 서버의 공개키로 암호화하여 서버에서 클라이언트로 전송하고 
클라이언트는 PMS를 생성하고 인증서안에 있는 서버의 공개키로 암호화하여 서버로 전송한다. 이렇게 하여 서로 암호화된 PMS를 주고 받을 수 있다.
서버는 비공개키로 PMS를 master secret 값을 만들고 session key를 생성 대칭키로 암호화하여 클라이언트에게 전송하고 이렇게
서로 session key를 공유할 수 있다. session key는 대칭키 방식으로 서버와 클라이언트가 통신할 때 암호화 값으로 사용한다.
post방식이 URL에 데이터가 노출되지 않아서 기본 보안은 되어있고 전송시 인코딩하고 때문에 ssl까지 사용할 필요가 없다고 생각이 든다.
이제 소켓 채팅을 개선시켜 보자. 일단 몇가지 문제점을 꼽아보자면 첫째 메뉴 전환 시 대화내용이 초기화 된다. 둘째 로그 아웃밑 메뉴 전환시 화면이 초기화 될때
소켓 통신이 끊어지지 않는다. 즉 계속 연결 된 상태다. 앱을 끌때까지
점심 때 했던 이야기를 적어볼려고 한다. 일단 연봉협상에 대한 이야기로 시작했었다. 연봉 인상률이 어느정도를 바라는가에 대해서인데
차장님은 일반론으로 7% 정도 된다고 한다. 전에 이 아키브에서 연봉을 20~30%로 올려 달라고 했던 사람이 있었다고 한다. 그래서 연봉협상에 실패해
이 회사를 나갔다고 한다. 그러다가 몇년 지나고 무엇을 할 것인가 무엇이 되있을 것인가에 대해 말하기 시작했다. 차장님은 
만약에 내일 채움공제를 필요치 않을 정도로 높은 연봉을 제시하는 회사가 나온다면 내일 채움공제 필요 없이 이직을 시도해 봐야한다고 한다고 하신다.
그리고 그정도 연봉을 받을 수 있을 정도로 실력을 갖출 수 있도록 실력 향상에 전념 해야 한다고 한다. 그럼 여기서 현실적인 잣대를 대보자.
과연 내가 내일 채움공제가 필요하지 않을 정도의 연봉을 받을 수 있는 정도의 실력을 공제가 끝나기 전인 21년 9월전까지 갖출 수 있는 것인가?
그렇다면 어느 정도의 연봉이 공제가 필요하지 않을 정도의 연봉일까? 한번 보자 간단하게 공제가 3년에 3천이지만 이 금액은 청년 납부액600, 취업지원금1800, 기업기여금600으로 나뉜다.
해지를 한다면 이중 청년 납부액과 취업지원금만 받을 수 잇다. 그것도 전부가 아니라 여태까지 월마다 적립했던 금액 만큼만이다. 1년 해지면 200 + 600 = 800 
2년 해지면 1600 대충 계산해 보자면 그렇다. 나는 이제 거의 1년이 다가오고 이직하기에는 적기가 아니다. 경력이 없기에 오라는 곳도 없다.
만약 내가 2020년 9월이 됬다고 해보자. 공제가 필요 없을 정도로 연봉이 될려면 저기서 1400-200이 더해진 약 4천정도가 된다. 2020년이면 내가 3년 차이니
경력 3년차에 4천급을 받을 수 있을 정도에 실력과 실적과 경력이 될 수 있을까? 잠깐 로켓펀치에서 구인글을 봐보자

React Native 클라이언트 개발자 모집
[자격요건]
React native 상태 관리에 대한 이해도가 높으신 분
React native redux, saga, react.js 경험이 있으신 분
개발시 꼼꼼한 성격을 지니신 분
개발을 좋아하시는 분
새로운 개발 환경 적응 능력이 좋으신 분
팀원들과 원할한 협업이 가능하신 분

[우대사항]
React native 로 프러덕션 개발 경험이 있으신 분
Swift 또는 android 네이티브 개발 경험이 있으신 분
풀스택 개발자

최소 4,500만원 / 최대 1.0% / 신입, 경력

[[자격 요건]]
- Django 및 restframework 개발경험 2년 이상 또는 그에 준하는 역량을 갖춘 분
- Mysql (RDBMS 에 대한 높은 이해도)
- 대용량 데이터 처리 및 전체적인 아키텍처 설계에 능숙하신분
- 개발시 꼼꼼한 성격을 지니신 분
- 팀원들과 원활한 협업이 가능하신 분 

[Django] 백엔드 서버/DB 개발자 모집(경력)

[[우대 사항]]
- 서비스 운영 경험 1년 이상
- Web Frontend 개발 경험자
- Jenkins, Kubernetes 등의 오픈소스 사용에 능숙하신 분
- node.js 사용 경험
- 개발 관련 문서 작업 거부감 없는 분
- 사람과 사람이 매칭되는 서비스나 업에 관심이 많은 분
- 타 부서와 원할한 커뮤니케이션이 가능한 분

5,000 - 7,000만원 / 최대 1.0% / 경력

frontend쪽에서 하나 backend쪽에서 하나씩 가져와 봤다. 결론짓자면 내가 위 경력을 충족한다면 공제 2년차에 이직해도 괜찮은 조건이 된다는 것을 알 수 있다.
표본이 부족하고 현실과 맞지 않는 점이 있다는 것을 감안한다면 2021년 연봉협상 때 이직을 생각해 볼 수 있다. 하지만 여전히 나머지 취업지원금 600, 기업기여금 600과 
이자는 적은 돈이 아니며 철저하게 조사 후에 행동에 나서야 함에는 변함이 없다. 
그리고 10년 후 10년 후 나는 무엇이 되어있을까? 개발자가 경력 10년이 되면 개발자로써 금액이 너무 높아 기술영업으로 빠지던가 프로젝트 매니저로 넘어가는 
경우가 많다고 한다. 10년 후 강산이 바뀌는 시간은 내겐 아직 먼 시간처럼 보인다. 하지만 시간은 총알처럼 지나가 과녁을 꾀뚫을 것이다. 10년 후 내가 
게으르고 자만하여 과녁을 꾀뚫지 못한다면 안되니 큰 그림을 그려 노력할 필요가 있다. 하지만 인생은 늘 계획처럼 지나가지 않겠지. 잘될꺼라 믿었던 것들은
산산히 부셔지며 뜻하지 못하는 곳에 기연을 얻는 소설 같은 이야기가 펼쳐지는 것이 인생이다. 늘 나 자신에게 최선을 다하는 것이 어쩌면 답이 될지도 모르겠다.
일단 첫번째 문제 메뉴전환시 채팅 내용이 사라진다에 대해서 카카오톡이 생각났던게 있어 적는다. 웹 소켓 통신은 통신만 관여 할뿐 데이터 저장에 영향을 미치지 
않는다. 채팅 내용이 사라지는게 싫다면 그 내용을 DB에 저장 해야 한다. 한줄씩 언제 누가 어떤내용의 글을 썻는가에 대해 적어야 한다. 적다보니깐 이 문제가 
아니라 vue-router가 주소 routing시 그 전에 vue 객체를 지운다. 메뉴를 전환해 다시 이전 메뉴로 돌아와도 저장되 있던 변수들이 초기화 된다. vue-router는 
왜 이런 방식을 택한걸까? 카카오톡은 어떤 채팅 방식을 쓰고 있는 걸까? 아마 메시지를 보낼때만 웹소켓 통신을 쓸 지도 모른다. 나머지는 알림이나 글들을 
DB에 하나 둘씩 push해 stack을 쌓는 것이다. 생각해 보니깐 아닐지도 카카오톡 모바일은 잘 모르겠으니 데스크톱 앱을 생각해보자. 데스크톱 앱은 잠금 상태일 때는
기능을 쓰지 못하게 막아놨을 뿐 로그인을 되 있는 것이라서 로그인 시 웹소켓을 연결 할 지도 모른다. 그러면 소켓이 연결되어 있으니 리스너를 통해 알림이나 
푸시를 전달하면 유저가 그걸 알 수 있을 것이다. 간단하게 간단하게 만들자. 생각이 너무 깊어졌다. 간단한 목표부터 만들고 하나씩 구현해 나가자.
보면 대화를 저장 하게 할 필요는 없다. 이 채팅 기능은 서버에 접속해 있는 유저들의 서버채팅창처럼 쓰는 것이다. 마치 카페 사이트 같은 곳에 들어가면 
어디 한구석에 익명의 사람들이 대화를 나눌 수 있는 채팅창을 만들어 놓은 것처럼 내가 굳이 카톡처럼 만들 필요는 없다. 대화를 저장할 필요 없고 사이트를 나가면
채팅창을 나가는 것이고 사이트를 들어가면 채팅창을 들어가는 것이다. 고로 메뉴가 전환될 때는 소켓통신을 종료하게 만들어야 한다. 로그아웃할 때 화면이 전환되므로
소켓통신이 끊긴다. 좋아 목표를 간소화 시키고 기능들을 만드니 만족스럽다. 채팅 기능은 이걸로 마무리 짓겠다. 이제 해결해야 할 문제는 mysql이 현재
한글을 입력하면 오류가 난다. 구체적으로 말하자면 한글이 들어간 파일을 업로드 할려고하면 에러가 발생한다. db characset을 저번에 utf8으로 전부 수정해서 해결 한걸로 기억하는데 
아무래도 아직 해결해야 할 부분이 남았나보다. 사실 최근에 hyper-v에서 vmware로 갈아타서 데이터베이스를 새로 깔았다. 그 당시에는 characset을 테이블마다 수정해줘서
해결한걸로 기억한다. workbench로 시도 해봤는데 이걸로는 적용이 안된다. 서버에 접속해 mysql로 들어가 characset을 변경하는 명령어를 치자 그제서야
정상적으로 한글 파일이 올라가진다. 이제 메일 기능을 추가 해 보자. 그 전에 메일이 어떤 방식으로 동작하는지 확인해보자. 간단하게 정리하면 메일 서버간 SMTP 혹은 POP3 프로토콜 통신으로
email 전송되는 것이다. 다행히도 Spring boot는 mail기능을 제공할 수 있는 package가 있고 우린 이걸 활용하기만 하면 된다. 이번에도 간단명료한 목표를
세우고 가자. post 통신으로 필요한 정보들이 담긴 Mail 객체를 받으면 MailSender로 보낸다. Mail객체를 만들 클래스를 정의하고 Rest Api를 사용할 Controller 클래스를 만들었다.
이제 POSTMAN으로 간단히 테스트 해볼려고 한다. 테스트 결과는 Unsupported Media Type이다. x-www-form-urlencoded라 그런가라고 생각해서 form-data로 header를 변경해 보았으나
동일한 오류가 발생한다. 생각해보니 이건 JSON으로 보내야 한다. Json으로 보낸 결과 아래와 같은 오류가 나왔다.
{
    "timestamp": "2019-07-05T08:23:16.337+0000",
    "status": 500,
    "error": "Internal Server Error",
    "message": "Request processing failed; nested exception is org.springframework.mail.MailSendException: Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 Must issue a STARTTLS command first. f186sm8083706pfb.5 - gsmtp\n; message exceptions (1) are:\nFailed message 1: com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 Must issue a STARTTLS command first. f186sm8083706pfb.5 - gsmtp\n",
    "path": "/api/mail/send"
}
나와 같은 문제를 격고 있는 사람의 답변을 보았다. 구글 계정 보안 옵션에서 보안 수준이 낮은 앱의 액세스을 허용하면 된다는 해결책이 있어 이걸 그대로 따라 했는데도 문제가 해결되지 않는다.








